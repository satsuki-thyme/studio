<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", () => {
  /*

    my script
  
  */
  document.querySelectorAll(".entry-content").forEach(r => {
    if (
      r.children.length === 1
      &&
      (
        r.children[0].nodeName === "p"
        ||
        r.children[0].nodeName === "P"
      )
    ) {
      let text = r.children[0].innerText
      fiveEach(r)
      .then(() => {
        r.innerHTML += `\n<p style="text-align: right;"><small>${text.replace(/(^\d{4}\/\d{2}\d{2}[ \t　]?|[ \t　])/gm, "").length} 文字</small></p>`
      })
    }
  })
  /*

    highlight.js
  
  */
  document.querySelectorAll('code').forEach((el) => {
    hljs.highlightElement(el)
  })
})
async function fiveEach(src) {
  src.innerHTML = `<p><small>段落は 5 句点ごとに機械的に設けたものです。</small></p>\n
  ${src.children[0].innerText.replace(/((?:.*?。){1,5})/g, '<p>$1</p>\n')}`
}
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SNXXMKK9WQ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SNXXMKK9WQ');
</script>